(function(b){window.Shareaholic=window.Shareaholic||{};window.shareaholic_debug=!0;Shareaholic.bind_button_clicks=function(a,c){c&&b(a.selector).off("click.app_settings");b(a.selector).off("click.app_settings").on("click.app_settings",function(c){button=this;c.preventDefault();url=a.url(this);if("#general_settings"==a.selector)return window.open(url),!1;$frame=b("<iframe>",{src:url}).appendTo("#iframe_container");a.callback&&a.callback(this);b("#editing_modal").reveal({topPosition:50,close:function(){a.close&&
a.close(button);$frame.remove()}})})};Shareaholic.click_objects={app_settings:{selector:"#app_settings button",url:function(a){id=b(a).data("location_id");app=b(a).data("app");url=first_part_of_url+b(a).data("href")+"?embedded=true&verification_key="+verification_key;return url=url.replace(/{{id}}/,id)},callback:function(a){id=b(a).data("location_id");app=b(a).data("app");text="You can also use this shortcode to place this {{app}} App anywhere.";html="<div id='shortcode_container'>           <span id='shortcode_description'></span>           <textarea id='shortcode' name='widget_div' onclick='select();' readonly='readonly'></textarea>         </div>";
b(html).appendTo(".reveal-modal");b("#shortcode_description").text(text.replace(/{{app}}/,Shareaholic.titlecase(app)));b("#shortcode").text('[shareaholic app="'+app+'" id="'+id+'"]')},close:function(a){b("#shortcode_container").remove()}},general_settings:{selector:"#general_settings",url:function(a){return first_part_of_url+"edit?verification_key="+verification_key}}};Shareaholic.Utils.PostMessage.receive("settings_saved",{success:function(a){b('input[type="submit"]').click()},failure:function(a){console.log(a)}});
Shareaholic.titlecase=function(a){return a.charAt(0).toUpperCase()+a.replace(/_[a-z]/g,function(a){return a.toUpperCase().replace(/_/," ")}).slice(1)};Shareaholic.disable_buttons=function(){b("#app_settings button").each(function(){b(this).data("location_id")?b(this).removeAttr("disabled"):b(this).attr("disabled","disabled")})};Shareaholic.create_new_location=function(a){button=b(a).siblings("button");app=button.data("app");location_id=button.data("location_id");location_id||(data={},data["configuration_"+
app+"_location"]={name:/.*\[(.*)\]/.exec(b(a).attr("name"))[1]},b.ajax({url:first_part_of_url+app+"/locations.json",type:"POST",data:data,success:function(a,b,d){a.action="shareaholic_add_location";button.data("location_id",a.location.id);Shareaholic.disable_buttons();Shareaholic.submit_to_admin(a,function(a){console.log(a)})},failure:function(a){console.log(a)},xhrFields:{withCredentials:!0}}))};Shareaholic.submit_to_admin=function(a,c){b.ajax({url:ajaxurl,type:"POST",data:a,success:function(a){try{a=
JSON.parse(a)}catch(b){a={}}c(a)},failure:function(a){try{a=JSON.parse(a)}catch(b){a={}}c(a)}})};b(document).ready(function(){Shareaholic.disable_buttons();Shareaholic.bind_button_clicks(Shareaholic.click_objects.app_settings);Shareaholic.bind_button_clicks(Shareaholic.click_objects.general_settings);Shareaholic.click_objects.unverified_general_settings&&Shareaholic.bind_button_clicks(Shareaholic.click_objects.unverified_general_settings,!0);b("#terms_of_service_modal").reveal({closeonbackgroundclick:!1,
closeonescape:!1,topPosition:50});b("#failed_to_create_api_key").reveal({closeonbackgroundclick:!1,closeonescape:!1,topPosition:50});b("#get_started").on("click",function(a){a.preventDefault();data={action:"shareaholic_accept_terms_of_service"};Shareaholic.submit_to_admin(data,function(){location.reload()})});b("form input[type=checkbox]").on("click",function(){b(this).is(":checked")&&!b(this).data("location_id")&&Shareaholic.create_new_location(this)})})})(sQuery);
